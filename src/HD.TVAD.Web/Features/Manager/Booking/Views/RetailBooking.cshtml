@using HD.TVAD.ApplicationCore.Entities.Booking
@model CreateRetailSpotBookingIndexViewModel
@{
	ViewBag.Title = Localizer["Create Retail Spot Booking"].Value;
	//	Layout = "_Manager_Layout";
}
@{
	var isEditMode = Model.AnnexContractId.HasValue;
	var opacity = "1";
	if (!isEditMode)
	{
		opacity = "0.3";
	}

	var random = new Random();
	var code = random.Next(10000, 99999);
}
<style>

</style>
<div class="container-vertical-flex">
	<div class="flex flex-1">
		<div class="panel panel-default" style="padding-top: 3px">
			@if (isEditMode)
			{
				@Html.Partial("_EditRetailAnnexContractPartial", new RetailContractForAPIEditViewModel() { 
						Code = Model.RetailContract.Code,
						CustomerName = Model.RetailContract.CustomerName,
						CustomerAddress = Model.RetailContract.CustomerAddress,
						Id = Model.RetailContract.Id,
						BookingTypeId = Model.RetailContract.BookingTypeId,
						ReceiveDate = Model.RetailContract.ReceiveDate,
						AnnexContractTypeId = Model.RetailContract.AnnexContractTypeId,
						CustomerId = Model.RetailContract.CustomerId
				})
			}
			else
			{
				@Html.Partial("_CreateRetailAnnexContractPartial", new RetailContractForAPICreateViewModel()
		   {
			   ReceiveDate = DateTime.Today,
			//   Code = code.ToString(),

		   })
			}
		</div>
	</div>
	<div class="flex flex-2" style="opacity: @opacity">
		<div class="panel panel-default">
			@if (isEditMode)
			{
				@Html.Partial("_AnnexContractAssetPartial", new AnnexContractAssetViewModel()
		   {
			   AnnexContractId = Model.AnnexContractId.Value,
			   BookingTypeId = (int)Model.RetailContract.BookingTypeId,
		   })
			}
			else
			{
				@Html.Partial("_AnnexContractAssetPartial", new AnnexContractAssetViewModel()
		   {
			   AnnexContractId = Guid.Empty,
			   BookingTypeId = (int)BookingTypeEnum.Retail,
		   })

			}
		</div>
	</div>
	<div class="flex flex-4" style="opacity: @opacity">
		<div class="container-vertical-flex">
			<div class="flex flex-1">
				<div class="panel panel-default">
					@if (isEditMode)
					{
						@Html.Partial("_SpotBookingPartial", new SpotBookingCreateIndexViewModel()
				   {
					   AnnexContractId = Model.AnnexContractId.Value,
					   BookingType = (BookingTypeEnum)Model.RetailContract.BookingTypeId,
				   })
					}
					else
					{
						@Html.Partial("_SpotBookingPartial", new SpotBookingCreateIndexViewModel()
				   {
					   AnnexContractId = Guid.Empty,
					   BookingType = BookingTypeEnum.Retail,
				   })

					}
				</div>
			</div>
			<div class="flex flex-0">
				<div style="height: 24px">
					<div class="panel panel-default">
						<form class="form-inline">
							<div class="form-group">
								<label>@Localizer["Contract value"]</label>
								<input id="ContractValue" class="form-control" />
							</div>

						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>